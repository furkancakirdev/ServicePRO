"use strict";(()=>{var e={};e.id=1193,e.ids=[1193],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1159:(e,r,i)=>{i.r(r),i.d(r,{originalPathname:()=>m,patchFetch:()=>c,requestAsyncStorage:()=>N,routeModule:()=>l,serverHooks:()=>L,staticGenerationAsyncStorage:()=>T});var a={};i.r(a),i.d(a,{GET:()=>u,POST:()=>o});var t=i(49303),A=i(88716),s=i(60670),d=i(87070),n=i(72331);let E=[{id:"2720",tarih:"03.02.2026",saat:"10:00",tekneAdi:"SCREENEX",adres:"YATMARIN",yer:"TOPRAK SAHA ELEKTRİK DİREĞİ YANINDA",servisAciklamasi:"SEAKEEPER 26 STABILIZER 2000 SAAT SERVİSLERİ S\xd6K\xdcM",irtibatKisi:"OSMAN BEY",telefon:"90 537 206 70 57",durum:"PLANLANDI-RANDEVU"},{id:"2721",tarih:"03.02.2026",saat:"09:30",tekneAdi:"TERRA",adres:"YATMARIN",yer:"ALFA - DIŞ",servisAciklamasi:"MOTOR MARŞ DİNAMO ARIZASI + BAZEN VİTESE GE\xc7MİYOR (MUHTEMELEN GAZ KOLU)",irtibatKisi:"YASİN",telefon:"0 532 747 68 41",durum:"PLANLANDI-RANDEVU"},{id:"2722",tarih:"03.02.2026",saat:"09:30",tekneAdi:"CAT. LEMAN",adres:"YATMARIN",yer:"BETON YOL SOLU - HOŞYOLLAR T. CİVARI",servisAciklamasi:"4JH57 RUTİN VE SD60 ALT GRUP BAKIMI",irtibatKisi:"ENES",telefon:"90 535 855 64 66",durum:"PLANLANDI-RANDEVU"},{id:"2723",tarih:"03.02.2026",saat:"13:30",tekneAdi:"DULCENIA",adres:"YATMARIN",yer:"DALGI\xc7 ARKASI",servisAciklamasi:"Yanmar 6LYA-STP MOTOR KONTROLLERİ VE YAPILMASI GERKENLER TEKLİF",durum:"PLANLANDI-RANDEVU"},{id:"2735",tekneAdi:"SERENGETI",adres:"YATMARIN",yer:"KARA",servisAciklamasi:"BESENZONI PASARELLA DEVAM",irtibatKisi:"YUNUS \xd6ZT\xdcRK",telefon:"90 543 850 25 67",durum:"DEVAM EDİYOR"},{id:"2747",tarih:"03.02.2026",saat:"13:30",tekneAdi:"TOY STORY",adres:"YATMARIN",yer:"toprak sahada ortada",servisAciklamasi:"OPACMARE PASARELLA ARIZA KONTROLLERİ - KONTROL PANEL İLE",irtibatKisi:"KEMAL KAPTAN",telefon:"90 533 455 46 42",durum:"PLANLANDI-RANDEVU"},{id:"2748",tekneAdi:"CIPITOUBA II",adres:"YATMARIN",yer:"KARA",servisAciklamasi:"JENERAT\xd6R DEVAM",durum:"DEVAM EDİYOR"},{id:"2749",tekneAdi:"KISMET",adres:"YATMARIN",yer:"",servisAciklamasi:"MOTOR MONTAJI DEVAM",durum:"DEVAM EDİYOR"},{id:"2750",tekneAdi:"TEE DJE",adres:"YATMARIN",yer:"KARA",servisAciklamasi:"TRAC STABILIZER PİSTON MONTAJLARI",durum:"DEVAM EDİYOR"},{id:"2751",tekneAdi:"OCEAN PEARL",adres:"YATMARIN",yer:"KARA",servisAciklamasi:"LİSTELİ İŞLER DEVAM",durum:"DEVAM EDİYOR"},{id:"2752",tekneAdi:"M/V ANTHEYA III",adres:"NETSEL",yer:"YATMARIN",servisAciklamasi:"TRAC 370 AT\xd6LYEDE TOPARLAMA İŞLERİ - ŞUBAT ORTASI TEKNE \xdcST\xdc MONTAJ",durum:"DEVAM EDİYOR"},{id:"2756",tarih:"03.02.2026",saat:"10:00",tekneAdi:"ODYSSEY",adres:"KARACAS\xd6Ğ\xdcT",yer:"GLOBAL SAILING",servisAciklamasi:"YANMAR 4JH2-HTE MOTOR MAJ\xd6R SERVİS S\xd6K\xdcMLERİ / TEKNE BOŞ OLABİLİR AMA A\xc7IK / GİREBİLİRSİNİZ - M\xdcMTAZ USTA İLE BAĞLANTI KURABİLİRSİNİZ. M\xdcMTAZ : 90 533 669 82 06",irtibatKisi:"TEKNE SAHİBİ G\xd6KHAN BEY",telefon:"5333680141",durum:"PLANLANDI-RANDEVU"}],R={"PLANLANDI-RANDEVU":"RANDEVU_VERILDI","DEVAM EDİYOR":"DEVAM_EDİYOR",TAMAMLANDI:"TAMAMLANDI","PARCA BEKLIYOR":"PARCA_BEKLIYOR","M\xdcŞTERİ ONAY BEKLIYOR":"MUSTERI_ONAY_BEKLIYOR"};async function o(e){try{console.log("\uD83D\uDD04 Google Sheets veri import başlatılıyor...");let e=new Map;E.forEach(r=>{r.tekneAdi&&r.tekneAdi.trim()&&!e.has(r.tekneAdi)&&e.set(r.tekneAdi,{ad:r.tekneAdi.trim(),adres:r.adres||"",aktif:!0})});let r=Array.from(e.values()),i=0;for(let e of r)!await n._.tekne.findFirst({where:{OR:[{ad:e.ad},{seriNo:e.ad}]}})&&(await n._.tekne.create({data:e}),i++);let a=0,t=0,A=0,s=[];for(let e of E)try{let r=e.tekneAdi?.trim();if(!r){A++;continue}let s=await n._.tekne.findFirst({where:{OR:[{ad:r},{seriNo:r}]}});!s&&(s=await n._.tekne.create({data:{ad:r,adres:e.adres||"",aktif:!0}}),i++);let d=function(e){if(!e)return null;let r=e.split(".");if(3!==r.length)return null;let[i,a,t]=r;return new Date(`${t}-${a}-${i}`)}(e.tarih),E=R[e.durum]||"RANDEVU_VERILDI",o={id:e.id,tekneId:s.id,tekneAdi:s.ad,adres:e.adres||"",yer:e.yer||"",servisAciklamasi:e.servisAciklamasi||"",durum:E,isTuru:"PAKET"};d&&(o.tarih=d),e.saat&&(o.saat=e.saat),e.irtibatKisi&&(o.irtibatKisi=e.irtibatKisi),e.telefon&&(o.telefon=e.telefon),await n._.service.findUnique({where:{id:e.id}})?(await n._.service.update({where:{id:e.id},data:o}),t++):(await n._.service.create({data:o}),a++)}catch(r){console.error(`❌ Servis import hatası [${e.id}]:`,r),s.push({id:e.id,tekne:e.tekneAdi,hata:r.message})}let o={success:!0,data:{tekneler:i,yeniServis:a,guncellenenServis:t,skipped:A,hatalar:s.length,hataDetaylari:s},message:`${a+t} servis başarıyla i\xe7e aktarıldı`};return console.log("✅ Import tamamlandı:",o.data),d.NextResponse.json(o)}catch(e){return console.error("❌ Import hatası:",e),d.NextResponse.json({success:!1,error:{code:"IMPORT_ERROR",message:"Veri i\xe7e aktarılırken hata oluştu",details:e.message}},{status:500})}}async function u(){try{let[e,r]=await Promise.all([n._.service.count(),n._.tekne.count()]);return d.NextResponse.json({success:!0,data:{mevcutServis:e,mevcutTekne:r,bekleyenImport:E.length}})}catch(e){return d.NextResponse.json({success:!1,error:{code:"STATUS_ERROR",message:"Durum sorgulanamadı",details:e.message}},{status:500})}}let l=new t.AppRouteRouteModule({definition:{kind:A.x.APP_ROUTE,page:"/api/servis/import/route",pathname:"/api/servis/import",filename:"route",bundlePath:"app/api/servis/import/route"},resolvedPagePath:"C:\\Users\\furkan.cakir\\Desktop\\ServicePro\\ServicePro_Demo\\app\\api\\servis\\import\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:N,staticGenerationAsyncStorage:T,serverHooks:L}=l,m="/api/servis/import/route";function c(){return(0,s.patchFetch)({serverHooks:L,staticGenerationAsyncStorage:T})}},72331:(e,r,i)=>{i.d(r,{_:()=>t});var a=i(53524);let t=global.prisma||new a.PrismaClient({log:["error"]})}};var r=require("../../../../webpack-runtime.js");r.C(e);var i=e=>r(r.s=e),a=r.X(0,[9276,5972],()=>i(1159));module.exports=a})();