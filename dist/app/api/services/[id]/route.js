"use strict";(()=>{var e={};e.id=692,e.ids=[692],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},33948:(e,r,i)=>{i.r(r),i.d(r,{originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>v,routeModule:()=>p,serverHooks:()=>y,staticGenerationAsyncStorage:()=>m});var t={};i.r(t),i.d(t,{DELETE:()=>c,GET:()=>u,PUT:()=>l});var a=i(49303),s=i(88716),n=i(60670),o=i(87070),d=i(72331);async function u(e,{params:r}){try{let e=await d._.service.findUnique({where:{id:r.id,deletedAt:null},include:{tekne:!0,ofisYetkili:{select:{id:!0,ad:!0,email:!0,role:!0}},personeller:{include:{personel:!0},orderBy:[{rol:"desc"}]},bekleyenParcalar:{orderBy:[{tamamlandi:"asc"}]},kapanisRaporu:!0,puanlar:{include:{personel:!0}}}});if(!e)return o.NextResponse.json({error:"Servis bulunamadı"},{status:404});return o.NextResponse.json(e)}catch(e){return console.error("GET /api/services/[id] error:",e),o.NextResponse.json({error:"Servis getirilemedi"},{status:500})}}async function l(e,{params:r}){try{let i=await e.json();if(!await d._.service.findUnique({where:{id:r.id,deletedAt:null}}))return o.NextResponse.json({error:"Servis bulunamadı"},{status:404});let t=await d._.service.update({where:{id:r.id},data:{...void 0!==i.tarih&&{tarih:i.tarih?new Date(i.tarih):null},...void 0!==i.saat&&{saat:i.saat},...void 0!==i.isTuru&&{isTuru:i.isTuru},...void 0!==i.adres&&{adres:i.adres},...void 0!==i.yer&&{yer:i.yer},...void 0!==i.servisAciklamasi&&{servisAciklamasi:i.servisAciklamasi},...void 0!==i.irtibatKisi&&{irtibatKisi:i.irtibatKisi},...void 0!==i.telefon&&{telefon:i.telefon},...void 0!==i.durum&&{durum:i.durum},...void 0!==i.taseronNotlari&&{taseronNotlari:i.taseronNotlari},...void 0!==i.tamamlanmaAt&&{tamamlanmaAt:i.tamamlanmaAt?new Date(i.tamamlanmaAt):null}},include:{tekne:!0,ofisYetkili:{select:{id:!0,ad:!0,email:!0}}}});return await d._.auditLog.create({data:{islemTuru:"UPDATE",entityTipi:"Service",entityId:t.id,detay:`Servis g\xfcncellendi: ${t.tekneAdi}`}}),o.NextResponse.json(t)}catch(e){return console.error("PUT /api/services/[id] error:",e),o.NextResponse.json({error:"Servis g\xfcncellenemedi"},{status:500})}}async function c(e,{params:r}){try{return await d._.service.update({where:{id:r.id,deletedAt:null},data:{deletedAt:new Date}}),await d._.auditLog.create({data:{islemTuru:"DELETE",entityTipi:"Service",entityId:r.id,detay:`Servis silindi: ${r.id}`}}),o.NextResponse.json({success:!0})}catch(e){return console.error("DELETE /api/services/[id] error:",e),o.NextResponse.json({error:"Servis silinemedi"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/services/[id]/route",pathname:"/api/services/[id]",filename:"route",bundlePath:"app/api/services/[id]/route"},resolvedPagePath:"C:\\Users\\furkan.cakir\\Desktop\\ServicePro\\ServicePro_Demo\\app\\api\\services\\[id]\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:v,staticGenerationAsyncStorage:m,serverHooks:y}=p,h="/api/services/[id]/route";function x(){return(0,n.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:m})}},72331:(e,r,i)=>{i.d(r,{_:()=>a});var t=i(53524);let a=global.prisma||new t.PrismaClient({log:["error"]})}};var r=require("../../../../webpack-runtime.js");r.C(e);var i=e=>r(r.s=e),t=r.X(0,[9276,5972],()=>i(33948));module.exports=t})();