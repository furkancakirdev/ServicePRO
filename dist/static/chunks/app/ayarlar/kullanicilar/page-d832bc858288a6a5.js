(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{5610:function(e,a,s){Promise.resolve().then(s.bind(s,2513))},2513:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return n}});var r=s(7437),t=s(2265),l=s(9376),i=s(7648);function n(){let e=(0,l.useRouter)(),[a,s]=(0,t.useState)([]),[n,d]=(0,t.useState)(!0),[c,o]=(0,t.useState)(!1),[u,h]=(0,t.useState)({ad:"",email:"",password:"",rol:"yetkili"});(0,t.useEffect)(()=>{let a=localStorage.getItem("user");if(!a){e.push("/login");return}if("admin"!==JSON.parse(a).rol){e.push("/");return}m()},[e]);let m=async()=>{try{let e=await fetch("/api/users"),a=await e.json();s(a)}catch(e){console.error("Failed to load users:",e)}finally{d(!1)}},p=async e=>{e.preventDefault();try{(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok&&(o(!1),h({ad:"",email:"",password:"",rol:"yetkili"}),m())}catch(e){console.error("Failed to add user:",e)}};return n?(0,r.jsx)("div",{style:{textAlign:"center",padding:"var(--space-2xl)"},children:"⏳ Y\xfckleniyor..."}):(0,r.jsxs)("div",{className:"animate-fade-in",children:[(0,r.jsxs)("header",{className:"page-header",children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-lg)"},children:[(0,r.jsx)(i.default,{href:"/ayarlar",className:"btn btn-secondary",style:{padding:"var(--space-sm)"},children:"←"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"page-title",children:"\uD83D\uDC65 Kullanıcı Y\xf6netimi"}),(0,r.jsxs)("p",{style:{color:"var(--color-text-muted)"},children:[a.length," yetkili kullanıcı"]})]})]}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>o(!c),children:c?"✕ İptal":"➕ Yeni Kullanıcı"})]}),c&&(0,r.jsxs)("div",{className:"card",style:{marginBottom:"var(--space-lg)"},children:[(0,r.jsx)("h3",{className:"card-title",children:"Yeni Kullanıcı Ekle"}),(0,r.jsxs)("form",{onSubmit:p,children:[(0,r.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"repeat(2, 1fr)",gap:"var(--space-md)"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"var(--space-xs)",fontSize:"0.85rem"},children:"Ad Soyad"}),(0,r.jsx)("input",{type:"text",className:"form-input",value:u.ad,onChange:e=>h({...u,ad:e.target.value}),required:!0,style:{width:"100%"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"var(--space-xs)",fontSize:"0.85rem"},children:"E-posta"}),(0,r.jsx)("input",{type:"email",className:"form-input",value:u.email,onChange:e=>h({...u,email:e.target.value}),required:!0,style:{width:"100%"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"var(--space-xs)",fontSize:"0.85rem"},children:"Şifre"}),(0,r.jsx)("input",{type:"password",className:"form-input",value:u.password,onChange:e=>h({...u,password:e.target.value}),placeholder:"Varsayılan: servicepro123",style:{width:"100%"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"var(--space-xs)",fontSize:"0.85rem"},children:"Rol"}),(0,r.jsxs)("select",{className:"form-select",value:u.rol,onChange:e=>h({...u,rol:e.target.value}),style:{width:"100%"},children:[(0,r.jsx)("option",{value:"yetkili",children:"Yetkili"}),(0,r.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",style:{marginTop:"var(--space-lg)"},children:"✅ Kullanıcı Ekle"})]})]}),(0,r.jsx)("div",{className:"table-container",children:(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Kullanıcı"}),(0,r.jsx)("th",{children:"E-posta"}),(0,r.jsx)("th",{children:"Rol"}),(0,r.jsx)("th",{children:"Durum"}),(0,r.jsx)("th",{children:"İşlemler"})]})}),(0,r.jsx)("tbody",{children:a.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)"},children:[(0,r.jsx)("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"admin"===e.rol?"var(--color-primary)":"var(--color-info)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.9rem"},children:"admin"===e.rol?"\uD83D\uDC51":"\uD83D\uDD11"}),(0,r.jsx)("span",{style:{fontWeight:500},children:e.ad})]})}),(0,r.jsx)("td",{children:e.email}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{style:{padding:"4px 10px",borderRadius:"var(--radius-full)",fontSize:"0.75rem",fontWeight:600,background:"admin"===e.rol?"var(--color-primary)":"var(--color-info)",color:"white"},children:"admin"===e.rol?"Admin":"Yetkili"})}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{style:{padding:"4px 10px",borderRadius:"var(--radius-full)",fontSize:"0.75rem",fontWeight:600,background:e.aktif?"var(--color-success)":"var(--color-error)",color:"white"},children:e.aktif?"Aktif":"Pasif"})}),(0,r.jsx)("td",{children:(0,r.jsx)("button",{className:"btn btn-secondary",style:{fontSize:"0.7rem",padding:"4px 8px"},children:"✏️ D\xfczenle"})})]},e.id))})]})})]})}},7648:function(e,a,s){"use strict";s.d(a,{default:function(){return t.a}});var r=s(2972),t=s.n(r)},9376:function(e,a,s){"use strict";var r=s(5475);s.o(r,"useParams")&&s.d(a,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(a,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(a,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(a,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=5610)}),_N_E=e.O()}]);