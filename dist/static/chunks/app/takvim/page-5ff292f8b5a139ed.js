(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[263],{6904:function(e,t,r){Promise.resolve().then(r.bind(r,8352))},8352:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var i=r(7437),n=r(2265),l=r(9376),o=r(6942),s=r(5262),a=r(5981),d=r(3802),c=r(6377),u=r(2516),p=r(4810),x=r(4939),h=r(6242);function v(){let e=(0,l.useRouter)(),{user:t,isAuthenticated:r}=(0,o.a)(),[v,g]=(0,n.useState)([]),[f,b]=(0,n.useState)(!0),[y,m]=(0,n.useState)("");(0,n.useEffect)(()=>{if(!r){f||e.push("/login");return}k()},[r,f,e]);let k=async()=>{b(!0);try{let e=await fetch("/api/servisler?limit=100");if(!e.ok)throw Error("Servisler getirilemedi");let t=(await e.json()).services.map(e=>{var t,r;return{id:e.id,title:"".concat(e.tekneAdi," - ").concat(e.servisAciklamasi),start:e.tarih?new Date(e.tarih).toISOString():new Date().toISOString(),backgroundColor:(null===(t=x.FI[e.durum])||void 0===t?void 0:t.color)||"#6b7280",borderColor:(null===(r=x.FI[e.durum])||void 0===r?void 0:r.color)||"#6b7280",extendedProps:{tekneId:e.tekneId,durum:e.durum,adres:e.adres}}});g(t)}catch(e){console.error("Servisler y\xfcklenemedi:",e)}finally{b(!1)}};return f?(0,i.jsx)("div",{style:{padding:"40px",textAlign:"center"},children:"Y\xfckleniyor..."}):(0,i.jsxs)("div",{style:{padding:"20px"},children:[(0,i.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,i.jsx)("h1",{style:{fontSize:"28px",fontWeight:700,marginBottom:"8px"},children:"Takvim"}),(0,i.jsx)("p",{style:{color:"var(--color-text-muted)"},children:"Servis planlamasÄ± ve takvimi"})]}),(0,i.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"24px"},children:(0,i.jsx)(s.Z,{plugins:[a.Z,d.Z,c.Z,u.ZP],initialView:"dayGridMonth",locale:p.Z,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,listWeek"},buttonText:{today:"Bug\xfcn",month:"Ay",week:"Hafta",day:"G\xfcn",list:"Liste"},events:v,eventClick:t=>{let r=t.event.id;e.push("/servisler/".concat(r))},selectable:!0,selectMirror:!0,select:t=>{let r=t.startStr;m(r),e.push("/servisler/yeni?tarih=".concat(r))},height:"auto",eventColor:"#3b82f6",eventBorderColor:"#2563eb",eventDidMount:e=>{let t=e.el.querySelector(".fc-event-title");t&&(t.style.fontSize="12px")}})}),(0,i.jsx)("div",{style:{marginTop:"24px",display:"flex",flexWrap:"wrap",gap:"12px"},children:Object.entries(x.FI).map(e=>{let[t,{label:r,color:n,icon:l}]=e;return(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,i.jsx)("span",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:n}}),(0,i.jsxs)("span",{style:{fontSize:"13px"},children:[l," ",r]})]},t)})}),(0,i.jsx)(h.yJ,{minimumRole:"YETKILI",fallback:(0,i.jsx)("div",{}),children:(0,i.jsx)("button",{onClick:()=>e.push("/servisler/yeni"),style:{marginTop:"24px",padding:"12px 24px",background:"#3b82f6",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:500},children:"+ Yeni Servis Ekle"})})]})}}},function(e){e.O(0,[554,280,212,971,117,744],function(){return e(e.s=6904)}),_N_E=e.O()}]);