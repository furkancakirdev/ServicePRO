(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{5446:function(e,r,t){Promise.resolve().then(t.bind(t,8817))},8817:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return s}});var i=t(7437),o=t(2265),n=t(9376),a=t(4939),l=t(6942),d=t(6242);function s(){var e,r,t,s,c;let x=(0,n.useRouter)(),p=(0,n.useParams)(),{user:u,isAuthenticated:g}=(0,l.a)(),[m,h]=(0,o.useState)(null),[b,f]=(0,o.useState)(!0),[v,y]=(0,o.useState)(""),[j,k]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/services/".concat(p.id));if(!e.ok){if(404===e.status){x.push("/servisler");return}throw Error("Servis getirilemedi")}let r=await e.json();h(r)}catch(e){y(e instanceof Error?e.message:"Bir hata oluştu")}finally{f(!1)}};g&&p.id&&e()},[g,p.id,x]);let S=async e=>{try{let r=await fetch("/api/services/".concat(p.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({durum:e})});if(!r.ok)throw Error("Durum g\xfcncellenemedi");let t=await r.json();h(t),k(!1)}catch(e){alert(e instanceof Error?e.message:"Bir hata oluştu")}};return b?(0,i.jsx)("div",{style:{padding:"40px",textAlign:"center"},children:"Y\xfckleniyor..."}):v||!m?(0,i.jsxs)("div",{style:{padding:"40px",textAlign:"center"},children:[(0,i.jsx)("h2",{style:{color:"#ef4444",marginBottom:"16px"},children:v||"Servis bulunamadı"}),(0,i.jsx)("button",{onClick:()=>x.back(),style:{padding:"12px 24px",background:"#3b82f6",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Geri D\xf6n"})]}):(0,i.jsxs)("div",{style:{padding:"20px"},children:[(0,i.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,i.jsx)("button",{onClick:()=>x.back(),style:{background:"none",border:"none",color:"var(--color-text-muted)",cursor:"pointer",fontSize:"14px",marginBottom:"16px"},children:"← Servislere D\xf6n"}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)("h1",{style:{fontSize:"32px",fontWeight:700,marginBottom:"8px"},children:m.tekneAdi}),(0,i.jsx)("p",{style:{color:"var(--color-text-muted)",fontSize:"16px"},children:m.servisAciklamasi})]}),(0,i.jsx)(d.yJ,{minimumRole:"YETKILI",fallback:(0,i.jsx)("div",{}),children:(0,i.jsx)("button",{onClick:()=>x.push("/servisler/".concat(m.id,"/duzenle")),style:{padding:"10px 20px",background:"#3b82f6",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:500},children:"D\xfczenle"})})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,i.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"16px",padding:"16px 24px",background:(null===(e=a.FI[m.durum])||void 0===e?void 0:e.bgColor)||"rgba(255,255,255,0.05)",borderRadius:"12px",border:"1px solid ".concat((null===(r=a.FI[m.durum])||void 0===r?void 0:r.color)||"rgba(255,255,255,0.1)")},children:[(0,i.jsx)("span",{style:{fontSize:"24px"},children:null===(t=a.FI[m.durum])||void 0===t?void 0:t.icon}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"18px",fontWeight:600,color:null===(s=a.FI[m.durum])||void 0===s?void 0:s.color},children:null===(c=a.FI[m.durum])||void 0===c?void 0:c.label}),(0,i.jsxs)("div",{style:{fontSize:"12px",color:"var(--color-text-muted)",marginTop:"4px"},children:["PAKET"===m.isTuru&&"Paket İş","ARIZA"===m.isTuru&&"Arıza / Keşif","PROJE"===m.isTuru&&"Proje / Refit"]})]})]}),(0,i.jsx)(d.yJ,{minimumRole:"YETKILI",fallback:(0,i.jsx)("div",{}),children:j?(0,i.jsxs)("div",{style:{marginTop:"16px",display:"flex",gap:"8px",flexWrap:"wrap"},children:[Object.keys(a.FI).map(e=>{var r,t,o,n,l;return(0,i.jsxs)("button",{onClick:()=>S(e),style:{padding:"8px 16px",background:null===(r=a.FI[e])||void 0===r?void 0:r.bgColor,border:"1px solid ".concat(null===(t=a.FI[e])||void 0===t?void 0:t.color),borderRadius:"6px",color:null===(o=a.FI[e])||void 0===o?void 0:o.color,cursor:"pointer",fontSize:"13px"},children:[null===(n=a.FI[e])||void 0===n?void 0:n.icon," ",null===(l=a.FI[e])||void 0===l?void 0:l.label]},e)}),(0,i.jsx)("button",{onClick:()=>k(!1),style:{padding:"8px 16px",background:"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",color:"var(--color-text-muted)",cursor:"pointer"},children:"İptal"})]}):(0,i.jsx)("button",{onClick:()=>k(!0),style:{marginTop:"16px",padding:"8px 16px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid #3b82f6",borderRadius:"6px",color:"#3b82f6",cursor:"pointer",fontSize:"13px"},children:"Durum Değiştir"})})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"32px"},children:[(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"20px"},children:[(0,i.jsx)("div",{style:{color:"var(--color-text-muted)",fontSize:"13px",marginBottom:"8px"},children:"Tarih & Saat"}),(0,i.jsxs)("div",{style:{fontSize:"16px",fontWeight:500},children:[m.tarih?new Date(m.tarih).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-",m.saat&&" - ".concat(m.saat)]})]}),(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"20px"},children:[(0,i.jsx)("div",{style:{color:"var(--color-text-muted)",fontSize:"13px",marginBottom:"8px"},children:"Lokasyon"}),(0,i.jsx)("div",{style:{fontSize:"16px",fontWeight:500},children:m.yer}),(0,i.jsx)("div",{style:{fontSize:"13px",color:"var(--color-text-muted)",marginTop:"4px"},children:m.adres})]}),(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"20px"},children:[(0,i.jsx)("div",{style:{color:"var(--color-text-muted)",fontSize:"13px",marginBottom:"8px"},children:"İrtibat"}),(0,i.jsx)("div",{style:{fontSize:"16px",fontWeight:500},children:m.irtibatKisi||"-"}),m.telefon&&(0,i.jsx)("div",{style:{fontSize:"13px",color:"var(--color-text-muted)",marginTop:"4px"},children:m.telefon})]}),(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"20px"},children:[(0,i.jsx)("div",{style:{color:"var(--color-text-muted)",fontSize:"13px",marginBottom:"8px"},children:"Tekne Bilgileri"}),(0,i.jsxs)("div",{style:{fontSize:"16px",fontWeight:500},children:[m.tekne.marka&&"".concat(m.tekne.marka," - "),m.tekne.model]}),m.tekne.boyut&&(0,i.jsxs)("div",{style:{fontSize:"13px",color:"var(--color-text-muted)",marginTop:"4px"},children:[m.tekne.boyut,"m"]})]})]}),m.personeller.length>0&&(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"24px",marginBottom:"24px"},children:[(0,i.jsx)("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px"},children:"Atanan Personel"}),(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:m.personeller.map(e=>(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"rgba(255, 255, 255, 0.02)",borderRadius:"8px"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{style:{fontWeight:500},children:e.personel.ad}),(0,i.jsx)("span",{style:{marginLeft:"12px",color:"var(--color-text-muted)",fontSize:"13px"},children:e.personel.unvan})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px",background:"SORUMLU"===e.rol?"rgba(34, 197, 94, 0.2)":"rgba(107, 114, 128, 0.2)",color:"SORUMLU"===e.rol?"#22c55e":"#6b7280"},children:"SORUMLU"===e.rol?"Sorumlu":"Destek"}),e.bonus&&(0,i.jsx)("span",{style:{fontSize:"12px",color:"#f59e0b"},children:"⭐ Bonus"})]})]},e.id))})]}),m.bekleyenParcalar.length>0&&(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"24px"},children:[(0,i.jsx)("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px"},children:"Bekleyen Par\xe7alar"}),(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:m.bekleyenParcalar.map(e=>(0,i.jsxs)("div",{style:{padding:"16px",background:e.tamamlandi?"rgba(34, 197, 94, 0.05)":"rgba(249, 115, 22, 0.05)",border:e.tamamlandi?"1px solid #22c55e":"1px solid #f97316",borderRadius:"8px"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,i.jsx)("div",{style:{fontWeight:500},children:e.parcaAdi}),(0,i.jsx)("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px",background:e.tamamlandi?"#22c55e":"#f97316",color:"#fff"},children:e.tamamlandi?"Tamamlandı":"Bekliyor"})]}),(0,i.jsxs)("div",{style:{fontSize:"13px",color:"var(--color-text-muted)",display:"flex",gap:"16px"},children:[(0,i.jsxs)("span",{children:[e.miktar," ",e.birim||"adet"]}),e.tedarikci&&(0,i.jsx)("span",{children:e.tedarikci}),e.beklenenTarih&&(0,i.jsxs)("span",{children:["T.: ",new Date(e.beklenenTarih).toLocaleDateString("tr-TR")]})]})]},e.id))})]}),m.taseronNotlari&&(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",padding:"24px",marginBottom:"24px"},children:[(0,i.jsx)("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px"},children:"Taşeron Notları"}),(0,i.jsx)("p",{style:{fontSize:"14px",color:"var(--color-text-muted)",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:m.taseronNotlari})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"32px",fontSize:"13px",color:"var(--color-text-muted)"},children:[(0,i.jsxs)("div",{children:["Oluşturulma: ",new Date(m.createdAt).toLocaleString("tr-TR")]}),m.updatedAt!==m.createdAt&&(0,i.jsxs)("div",{children:["G\xfcncellenme: ",new Date(m.updatedAt).toLocaleString("tr-TR")]}),m.tamamlanmaAt&&(0,i.jsxs)("div",{children:["Tamamlanma: ",new Date(m.tamamlanmaAt).toLocaleString("tr-TR")]})]})]})}},9376:function(e,r,t){"use strict";var i=t(5475);t.o(i,"useParams")&&t.d(r,{useParams:function(){return i.useParams}}),t.o(i,"usePathname")&&t.d(r,{usePathname:function(){return i.usePathname}}),t.o(i,"useRouter")&&t.d(r,{useRouter:function(){return i.useRouter}}),t.o(i,"useSearchParams")&&t.d(r,{useSearchParams:function(){return i.useSearchParams}})}},function(e){e.O(0,[212,971,117,744],function(){return e(e.s=5446)}),_N_E=e.O()}]);