(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{5111:function(e,r,t){Promise.resolve().then(t.bind(t,7478))},7478:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var o=t(7437),i=t(2265),a=t(9376),s=t(4939),n=t(6942),l=t(6242);function d(){let e=(0,a.useRouter)(),{user:r,isAuthenticated:t}=(0,n.a)(),[d,u]=(0,i.useState)([]),[p,c]=(0,i.useState)(!0),[x,g]=(0,i.useState)(""),[h,v]=(0,i.useState)(""),[b,f]=(0,i.useState)(""),[m,y]=(0,i.useState)(1),[j,k]=(0,i.useState)({page:1,limit:50,total:0,totalPages:0}),S=async()=>{c(!0),g("");try{let e=new URLSearchParams({page:m.toString(),limit:"50",...h&&{durum:h},...b&&{arama:b}}),r=await fetch("/api/services?".concat(e));if(!r.ok)throw Error("Servisler getirilemedi");let t=await r.json();u(t.services),k(t.pagination)}catch(e){g(e instanceof Error?e.message:"Bir hata oluştu")}finally{c(!1)}};(0,i.useEffect)(()=>{t&&S()},[t,m,h,b]),(0,i.useEffect)(()=>{t||p||e.push("/login")},[t,p,e]);let P=r=>{e.push("/servisler/".concat(r))};return p?(0,o.jsx)("div",{style:{padding:"40px",textAlign:"center"},children:(0,o.jsx)("div",{children:"Y\xfckleniyor..."})}):(0,o.jsxs)("div",{style:{padding:"20px"},children:[(0,o.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,o.jsx)("h1",{style:{fontSize:"24px",fontWeight:700,marginBottom:"8px"},children:"Servisler"}),(0,o.jsxs)("p",{style:{color:"var(--color-text-muted)"},children:["Toplam ",j.total," servis kaydı"]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"16px",marginBottom:"24px",flexWrap:"wrap"},children:[(0,o.jsx)("input",{type:"text",placeholder:"Servis, tekne veya adres ara...",value:b,onChange:e=>{f(e.target.value),y(1)},style:{flex:1,minWidth:"200px",padding:"10px 16px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",background:"rgba(255,255,255,0.05)",color:"#fff"}}),(0,o.jsxs)("select",{value:h,onChange:e=>{v(e.target.value),y(1)},style:{padding:"10px 16px",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",background:"rgba(255,255,255,0.05)",color:"#fff"},children:[(0,o.jsx)("option",{value:"",children:"T\xfcm Durumlar"}),Object.entries(s.FI).map(e=>{let[r,{label:t}]=e;return(0,o.jsx)("option",{value:r,children:t},r)})]}),(0,o.jsx)(l.yJ,{minimumRole:"YETKILI",fallback:(0,o.jsx)("button",{disabled:!0,style:{opacity:.5},children:"+ Yeni Servis"}),children:(0,o.jsx)("button",{onClick:()=>e.push("/servisler/yeni"),style:{padding:"10px 24px",background:"#3b82f6",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:500},children:"+ Yeni Servis"})})]}),x&&(0,o.jsx)("div",{style:{padding:"16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid #ef4444",borderRadius:"8px",color:"#ef4444",marginBottom:"16px"},children:x}),0===d.length?(0,o.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--color-text-muted)"},children:[(0,o.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCCB"}),(0,o.jsx)("p",{children:"Servis kaydı bulunmuyor"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden"},children:[(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"100px 140px 1fr 120px 120px 100px",gap:"16px",padding:"16px",background:"rgba(255, 255, 255, 0.05)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",fontWeight:600,fontSize:"14px",color:"var(--color-text-muted)"},children:[(0,o.jsx)("div",{children:"Tarih"}),(0,o.jsx)("div",{children:"Tekne"}),(0,o.jsx)("div",{children:"Servis A\xe7ıklaması"}),(0,o.jsx)("div",{children:"Lokasyon"}),(0,o.jsx)("div",{children:"Durum"}),(0,o.jsx)("div",{})]}),d.map(e=>{var r,t,i,a;return(0,o.jsxs)("div",{onClick:()=>P(e.id),style:{display:"grid",gridTemplateColumns:"100px 140px 1fr 120px 120px 100px",gap:"16px",padding:"16px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:[(0,o.jsxs)("div",{style:{fontSize:"14px"},children:[e.tarih?new Date(e.tarih).toLocaleDateString("tr-TR"):"-",e.saat&&(0,o.jsxs)("span",{style:{color:"var(--color-text-muted)",fontSize:"12px"},children:[" ",e.saat]})]}),(0,o.jsx)("div",{style:{fontSize:"14px",fontWeight:500},children:e.tekneAdi}),(0,o.jsx)("div",{style:{fontSize:"13px",color:"var(--color-text-muted)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.servisAciklamasi}),(0,o.jsx)("div",{style:{fontSize:"13px",color:"var(--color-text-muted)"},children:e.yer}),(0,o.jsx)("div",{children:(0,o.jsxs)("span",{style:{fontSize:"12px",padding:"4px 10px",borderRadius:"4px",background:null===(r=s.FI[e.durum])||void 0===r?void 0:r.bgColor,color:null===(t=s.FI[e.durum])||void 0===t?void 0:t.color},children:[null===(i=s.FI[e.durum])||void 0===i?void 0:i.icon," ",null===(a=s.FI[e.durum])||void 0===a?void 0:a.label]})}),(0,o.jsx)("div",{style:{display:"flex",gap:"8px"},children:e.personeller.length>0&&(0,o.jsxs)("span",{style:{fontSize:"12px",padding:"4px 8px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"4px",color:"#3b82f6"},children:["\uD83D\uDC64 ",e.personeller.length]})})]},e.id)})]}),j.totalPages>1&&(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"16px",marginTop:"24px"},children:[(0,o.jsx)("button",{onClick:()=>y(e=>Math.max(1,e-1)),disabled:1===m,style:{padding:"8px 16px",background:1===m?"rgba(255,255,255,0.05)":"rgba(59, 130, 246, 0.1)",color:1===m?"var(--color-text-muted)":"#3b82f6",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",cursor:1===m?"not-allowed":"pointer"},children:"←"}),(0,o.jsxs)("span",{style:{color:"var(--color-text-muted)"},children:["Sayfa ",m," / ",j.totalPages]}),(0,o.jsx)("button",{onClick:()=>y(e=>Math.min(j.totalPages,e+1)),disabled:m===j.totalPages,style:{padding:"8px 16px",background:m===j.totalPages?"rgba(255,255,255,0.05)":"rgba(59, 130, 246, 0.1)",color:m===j.totalPages?"var(--color-text-muted)":"#3b82f6",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"6px",cursor:m===j.totalPages?"not-allowed":"pointer"},children:"→"})]})]})]})}},9376:function(e,r,t){"use strict";var o=t(5475);t.o(o,"useParams")&&t.d(r,{useParams:function(){return o.useParams}}),t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}}),t.o(o,"useSearchParams")&&t.d(r,{useSearchParams:function(){return o.useSearchParams}})}},function(e){e.O(0,[212,971,117,744],function(){return e(e.s=5111)}),_N_E=e.O()}]);