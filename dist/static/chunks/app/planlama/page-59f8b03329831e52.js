(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[551],{5579:function(e,r,a){Promise.resolve().then(a.bind(a,4547))},4547:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return y}});var n=a(7437),l=a(2265),i=a(7648),s=a(1313),t=a(4939),o=a(9596);let d=[{key:"uniteBilgileri",label:"\xdcnite Bilgileri (Seri No, Model vb.)"},{key:"fotograf",label:"Fotoğraf (\xd6ncesi/Sonrası)"},{key:"tekneKonum",label:"Tekne/Konum bilgisi"},{key:"sarfMalzeme",label:"Sarf Malzeme"},{key:"adamSaat",label:"Adam/Saat"},{key:"taseronBilgisi",label:"Taşeron bilgisi"},{key:"stokMalzeme",label:"Stok Malzeme"}],c={uniteBilgileri:!1,fotograf:!1,tekneKonum:!1,sarfMalzeme:!1,adamSaat:!1,taseronBilgisi:!1,stokMalzeme:!1,aciklama:"",raporlayanPersonel:"",raporTarihi:new Date().toISOString().split("T")[0]};function u(e){let{service:r,isOpen:a,onClose:i,onComplete:s}=e,[u,p]=(0,l.useState)(c),[x,f]=(0,l.useState)([]);if((0,l.useEffect)(()=>{if(r){var e;f(t.DV.filter(e=>"teknisyen"===e.rol&&e.aktif).map(e=>{let a=r.atananPersonel.find(r=>r.personnelId===e.id);return{personnelId:e.id,personnelAd:e.ad,unvan:e.unvan,secili:!!a,rol:(null==a?void 0:a.rol)||"destek",bonus:!1}})),p({...c,raporlayanPersonel:(null===(e=r.atananPersonel.find(e=>"sorumlu"===e.rol))||void 0===e?void 0:e.personnelAd)||"",raporTarihi:new Date().toISOString().split("T")[0]})}},[r]),!r||!a)return null;let v=t.sY[r.isTuru],b=(0,o.NJ)(u,r.isTuru),h=x.filter(e=>e.secili),y=h.filter(e=>"sorumlu"===e.rol),g=h.filter(e=>"destek"===e.rol),k=e=>{f(r=>r.map(r=>r.personnelId===e?{...r,secili:!r.secili}:r))},j=(e,r)=>{f(a=>a.map(a=>a.personnelId===e?{...a,rol:r}:a))},S=e=>{f(r=>r.map(r=>r.personnelId===e?{...r,bonus:!r.bonus}:r))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{onClick:i,style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",zIndex:200}}),(0,n.jsxs)("div",{style:{position:"fixed",right:0,top:0,bottom:0,width:"520px",background:"var(--color-surface)",boxShadow:"var(--shadow-lg)",zIndex:201,display:"flex",flexDirection:"column",animation:"slideIn 0.3s ease"},children:[(0,n.jsxs)("div",{style:{padding:"var(--space-lg)",borderBottom:"1px solid var(--color-border)",background:"linear-gradient(135deg, var(--color-success) 0%, #059669 100%)",color:"white"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsx)("h2",{style:{margin:0,fontSize:"1.25rem"},children:"✓ Servis Tamamlama"}),(0,n.jsx)("button",{onClick:i,style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"var(--radius-full)",width:"32px",height:"32px",color:"white",cursor:"pointer",fontSize:"1.2rem"},children:"\xd7"})]}),(0,n.jsxs)("div",{style:{marginTop:"var(--space-sm)",opacity:.9},children:[r.tekneAdi," • ",r.servisAciklamasi.substring(0,40),"..."]})]}),(0,n.jsxs)("div",{style:{flex:1,overflow:"auto",padding:"var(--space-lg)"},children:[(0,n.jsxs)("div",{style:{display:"inline-block",padding:"var(--space-xs) var(--space-sm)",background:"var(--color-accent-gold)",color:"black",borderRadius:"var(--radius-sm)",fontSize:"0.8rem",fontWeight:600,marginBottom:"var(--space-lg)"},children:[t.Ib[r.isTuru].label," (\xd7",t.Ib[r.isTuru].carpan,")"]}),(0,n.jsxs)("div",{style:{marginBottom:"var(--space-xl)"},children:[(0,n.jsx)("h3",{style:{marginBottom:"var(--space-md)",fontSize:"0.9rem",color:"var(--color-text-muted)"},children:"\uD83D\uDC65 SERVİSTE \xc7ALIŞAN PERSONEL"}),(0,n.jsx)("div",{style:{padding:"var(--space-sm)",background:"var(--color-info)",borderRadius:"var(--radius-sm)",fontSize:"0.75rem",color:"white",marginBottom:"var(--space-md)"},children:"\uD83D\uDCA1 Personeli se\xe7in ve rol\xfcn\xfc belirleyin. Sorumlu = rapor kalitesine g\xf6re, Destek = sabit baz puan."}),(0,n.jsx)("div",{style:{maxHeight:"250px",overflow:"auto"},children:x.map(e=>(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",padding:"var(--space-sm)",background:e.secili?"var(--color-surface-elevated)":"transparent",borderRadius:"var(--radius-md)",marginBottom:"var(--space-xs)",border:e.secili?"1px solid var(--color-border)":"1px solid transparent"},children:[(0,n.jsx)("button",{onClick:()=>k(e.personnelId),style:{width:"22px",height:"22px",borderRadius:"4px",border:e.secili?"none":"2px solid var(--color-border)",background:e.secili?"var(--color-primary)":"transparent",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",flexShrink:0},children:e.secili&&"✓"}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("span",{style:{fontWeight:500},children:e.personnelAd}),(0,n.jsxs)("span",{style:{marginLeft:"var(--space-xs)",fontSize:"0.7rem",color:"var(--color-text-muted)"},children:[t.Rf[e.unvan].icon," ",t.Rf[e.unvan].label]})]}),e.secili&&(0,n.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,n.jsx)("button",{onClick:()=>j(e.personnelId,"sorumlu"),style:{padding:"2px 8px",fontSize:"0.7rem",fontWeight:600,border:"sorumlu"===e.rol?"2px solid var(--color-primary)":"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"sorumlu"===e.rol?"var(--color-primary)":"transparent",color:"sorumlu"===e.rol?"white":"var(--color-text-muted)",cursor:"pointer"},children:"Sorumlu"}),(0,n.jsx)("button",{onClick:()=>j(e.personnelId,"destek"),style:{padding:"2px 8px",fontSize:"0.7rem",fontWeight:600,border:"destek"===e.rol?"2px solid var(--color-success)":"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"destek"===e.rol?"var(--color-success)":"transparent",color:"destek"===e.rol?"white":"var(--color-text-muted)",cursor:"pointer"},children:"Destek"})]})]},e.personnelId))})]}),(0,n.jsx)("h3",{style:{marginBottom:"var(--space-md)",fontSize:"0.9rem",color:"var(--color-text-muted)"},children:"\uD83D\uDCCB RAPOR KONTROL LİSTESİ"}),d.map(e=>{let r=e.key,a=v.includes(e.key),l=!0===u[r];return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",padding:"var(--space-sm)",marginBottom:"var(--space-xs)",background:a?"var(--color-surface-elevated)":"transparent",borderRadius:"var(--radius-sm)",opacity:a?1:.4},children:[(0,n.jsx)("button",{onClick:()=>a&&p({...u,[r]:!l}),disabled:!a,style:{width:"22px",height:"22px",borderRadius:"4px",border:l?"none":"2px solid var(--color-border)",background:l?"var(--color-success)":"transparent",color:"white",cursor:a?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",flexShrink:0},children:l&&"✓"}),(0,n.jsx)("span",{style:{flex:1,fontSize:"0.85rem"},children:e.label}),a&&(0,n.jsx)("span",{style:{fontSize:"0.65rem",color:"var(--color-error)",fontWeight:600},children:"ZORUNLU"})]},e.key)}),(0,n.jsx)("div",{style:{marginTop:"var(--space-lg)",padding:"var(--space-md)",background:"linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%)",borderRadius:"var(--radius-md)",color:"white"},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("span",{style:{opacity:.9},children:"Rapor Başarı Oranı"}),(0,n.jsxs)("span",{style:{fontSize:"1.5rem",fontWeight:700},children:["%",Math.round(100*b)]})]})}),h.length>0&&(0,n.jsxs)("div",{style:{marginTop:"var(--space-lg)"},children:[(0,n.jsx)("h3",{style:{marginBottom:"var(--space-sm)",fontSize:"0.9rem",color:"var(--color-text-muted)"},children:"\uD83D\uDCB0 PUAN \xd6NİZLEME"}),y.length>0&&(0,n.jsxs)("div",{style:{marginBottom:"var(--space-md)"},children:[(0,n.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--color-primary-light)",marginBottom:"var(--space-xs)",fontWeight:600},children:"SORUMLU (Rapor Kalitesine G\xf6re)"}),y.map(e=>{let a=(0,o.xm)(b,r.isTuru,"sorumlu",e.bonus);return(0,n.jsx)(m,{personel:e,puan:a,formula:"(40 + 60\xd7".concat(Math.round(100*b),"%) \xd7 ").concat(a.zorlukCarpani).concat(e.bonus?" +15":""),isSorumlu:!0,onToggleBonus:()=>S(e.personnelId)},e.personnelId)})]}),g.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--color-success)",marginBottom:"var(--space-xs)",fontWeight:600},children:"DESTEK (Sabit 80 Baz Puan)"}),g.map(e=>{let a=(0,o.xm)(1,r.isTuru,"destek",e.bonus);return(0,n.jsx)(m,{personel:e,puan:a,formula:"80 \xd7 ".concat(a.zorlukCarpani).concat(e.bonus?" +15":""),isSorumlu:!1,onToggleBonus:()=>S(e.personnelId)},e.personnelId)})]})]})]}),(0,n.jsxs)("div",{style:{padding:"var(--space-lg)",borderTop:"1px solid var(--color-border)",display:"flex",gap:"var(--space-sm)"},children:[(0,n.jsx)("button",{className:"btn btn-secondary",onClick:i,style:{flex:1},children:"İptal"}),(0,n.jsxs)("button",{className:"btn btn-success",onClick:()=>{s(u,h.map(e=>({personnelId:e.personnelId,personnelAd:e.personnelAd,rol:e.rol,unvan:e.unvan,bonus:e.bonus}))),i()},style:{flex:2},disabled:0===h.length,children:["✓ Servisi Tamamla (",h.length," personel)"]})]})]})]})}function m(e){let{personel:r,puan:a,formula:l,isSorumlu:i,onToggleBonus:s}=e;return(0,n.jsxs)("div",{style:{padding:"var(--space-sm)",background:"var(--color-surface-elevated)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-xs)",display:"flex",alignItems:"center",justifyContent:"space-between",borderLeft:"3px solid ".concat(i?"var(--color-primary)":"var(--color-success)")},children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{fontWeight:500,fontSize:"0.85rem"},children:[t.Rf[r.unvan].icon," ",r.personnelAd]}),(0,n.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--color-text-muted)"},children:l})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)"},children:[(0,n.jsx)("button",{onClick:s,style:{padding:"2px 6px",fontSize:"0.65rem",border:r.bonus?"1px solid var(--color-accent-gold)":"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:r.bonus?"var(--color-accent-gold)":"transparent",color:r.bonus?"black":"var(--color-text-muted)",cursor:"pointer"},children:"⭐ +15"}),(0,n.jsx)("span",{style:{fontSize:"1.25rem",fontWeight:700,color:i?"var(--color-primary-light)":"var(--color-success)"},children:a.finalPuan})]})]})}var p=a(29),x=a.n(p);function f(e){let{serviceId:r,tekneAdi:a,initialParcalar:i=[],initialNot:s="",isOpen:t,onClose:o,onSave:d}=e,[c,u]=(0,l.useState)(i.length>0?i:[{parcaAdi:"",miktar:1}]),[m,p]=(0,l.useState)(s);if(!t)return null;let f=e=>{u(c.filter((r,a)=>a!==e))},v=(e,r,a)=>{let n=[...c];n[e]={...n[e],[r]:a},u(n)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{onClick:o,style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:200},className:"jsx-ec83d9b729de14f4"}),(0,n.jsxs)("div",{style:{position:"fixed",right:0,top:0,bottom:0,width:"450px",background:"var(--color-surface)",boxShadow:"var(--shadow-lg)",zIndex:201,display:"flex",flexDirection:"column",animation:"slideIn 0.3s ease"},className:"jsx-ec83d9b729de14f4",children:[(0,n.jsxs)("div",{style:{padding:"var(--space-lg)",borderBottom:"1px solid var(--color-border)",background:"linear-gradient(135deg, #ea580c 0%, #c2410c 100%)",color:"white"},className:"jsx-ec83d9b729de14f4",children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},className:"jsx-ec83d9b729de14f4",children:[(0,n.jsx)("h2",{style:{margin:0,fontSize:"1.25rem"},className:"jsx-ec83d9b729de14f4",children:"\uD83D\uDCE6 Beklenen Par\xe7alar"}),(0,n.jsx)("button",{onClick:o,style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"var(--radius-full)",width:"32px",height:"32px",color:"white",cursor:"pointer",fontSize:"1.2rem"},className:"jsx-ec83d9b729de14f4",children:"\xd7"})]}),(0,n.jsx)("div",{style:{marginTop:"var(--space-sm)",opacity:.9},className:"jsx-ec83d9b729de14f4",children:a})]}),(0,n.jsxs)("div",{style:{flex:1,overflow:"auto",padding:"var(--space-lg)"},className:"jsx-ec83d9b729de14f4",children:[(0,n.jsxs)("div",{style:{marginBottom:"var(--space-lg)"},className:"jsx-ec83d9b729de14f4",children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-md)"},className:"jsx-ec83d9b729de14f4",children:[(0,n.jsx)("h3",{style:{margin:0,fontSize:"0.9rem",color:"var(--color-text-muted)"},className:"jsx-ec83d9b729de14f4",children:"PAR\xc7A LİSTESİ"}),(0,n.jsx)("button",{onClick:()=>{u([...c,{parcaAdi:"",miktar:1}])},style:{background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",padding:"4px 8px",fontSize:"0.8rem",cursor:"pointer"},className:"jsx-ec83d9b729de14f4",children:"+ Par\xe7a Ekle"})]}),c.map((e,r)=>(0,n.jsxs)("div",{style:{background:"var(--color-bg)",borderRadius:"var(--radius-md)",padding:"var(--space-md)",marginBottom:"var(--space-sm)"},className:"jsx-ec83d9b729de14f4",children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"var(--space-sm)"},className:"jsx-ec83d9b729de14f4",children:[(0,n.jsxs)("span",{style:{fontSize:"0.8rem",color:"var(--color-text-muted)"},className:"jsx-ec83d9b729de14f4",children:["Par\xe7a #",r+1]}),c.length>1&&(0,n.jsx)("button",{onClick:()=>f(r),style:{background:"none",border:"none",color:"var(--color-error)",cursor:"pointer",fontSize:"0.8rem"},className:"jsx-ec83d9b729de14f4",children:"Kaldır"})]}),(0,n.jsx)("input",{type:"text",placeholder:"Par\xe7a adı...",value:e.parcaAdi,onChange:e=>v(r,"parcaAdi",e.target.value),style:{width:"100%",padding:"var(--space-sm)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-sm)"},className:"jsx-ec83d9b729de14f4"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-sm)"},className:"jsx-ec83d9b729de14f4",children:[(0,n.jsxs)("div",{className:"jsx-ec83d9b729de14f4",children:[(0,n.jsx)("label",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},className:"jsx-ec83d9b729de14f4",children:"Miktar"}),(0,n.jsx)("input",{type:"number",min:"1",value:e.miktar,onChange:e=>v(r,"miktar",parseInt(e.target.value)||1),style:{width:"100%",padding:"var(--space-xs)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},className:"jsx-ec83d9b729de14f4"})]}),(0,n.jsxs)("div",{className:"jsx-ec83d9b729de14f4",children:[(0,n.jsx)("label",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},className:"jsx-ec83d9b729de14f4",children:"Tedarik\xe7i"}),(0,n.jsx)("input",{type:"text",placeholder:"Firma adı",value:e.tedarikci||"",onChange:e=>v(r,"tedarikci",e.target.value),style:{width:"100%",padding:"var(--space-xs)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},className:"jsx-ec83d9b729de14f4"})]})]}),(0,n.jsxs)("div",{style:{marginTop:"var(--space-sm)"},className:"jsx-ec83d9b729de14f4",children:[(0,n.jsx)("label",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},className:"jsx-ec83d9b729de14f4",children:"Beklenen Tarih"}),(0,n.jsx)("input",{type:"date",value:e.beklenenTarih||"",onChange:e=>v(r,"beklenenTarih",e.target.value),style:{width:"100%",padding:"var(--space-xs)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},className:"jsx-ec83d9b729de14f4"})]})]},r))]}),(0,n.jsxs)("div",{className:"jsx-ec83d9b729de14f4",children:[(0,n.jsx)("h3",{style:{marginBottom:"var(--space-sm)",fontSize:"0.9rem",color:"var(--color-text-muted)"},className:"jsx-ec83d9b729de14f4",children:"TAŞERON NOTLARI"}),(0,n.jsx)("textarea",{value:m,onChange:e=>p(e.target.value),placeholder:"Hangi firmaya g\xf6nderildi, ne zaman d\xf6necek, iletişim bilgileri vs...",style:{width:"100%",padding:"var(--space-sm)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",minHeight:"120px",resize:"vertical"},className:"jsx-ec83d9b729de14f4"})]})]}),(0,n.jsxs)("div",{style:{padding:"var(--space-lg)",borderTop:"1px solid var(--color-border)",display:"flex",gap:"var(--space-sm)"},className:"jsx-ec83d9b729de14f4",children:[(0,n.jsx)("button",{onClick:o,style:{flex:1},className:"jsx-ec83d9b729de14f4 btn btn-secondary",children:"İptal"}),(0,n.jsx)("button",{onClick:()=>{d(c.filter(e=>""!==e.parcaAdi.trim()),m),o()},style:{flex:2},className:"jsx-ec83d9b729de14f4 btn btn-primary",children:"\uD83D\uDCBE Kaydet"})]})]}),(0,n.jsx)(x(),{id:"ec83d9b729de14f4",children:"@-webkit-keyframes slideIn{from{-webkit-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slideIn{from{-moz-transform:translatex(100%);transform:translatex(100%)}to{-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slideIn{from{-o-transform:translatex(100%);transform:translatex(100%)}to{-o-transform:translatex(0);transform:translatex(0)}}@keyframes slideIn{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}"})]})}var v=a(9116);let b=["RANDEVU_VERILDI","DEVAM_EDIYOR","PARCA_BEKLIYOR","MUSTERI_ONAY_BEKLIYOR","RAPOR_BEKLIYOR","KESIF_KONTROL","TAMAMLANDI"],h=["YATMARIN","NETSEL","DIS_SERVIS"];function y(){let[e,r]=(0,l.useState)([]),[a,s]=(0,l.useState)(["RANDEVU_VERILDI","DEVAM_EDIYOR","PARCA_BEKLIYOR","MUSTERI_ONAY_BEKLIYOR","RAPOR_BEKLIYOR","KESIF_KONTROL"]),[o,d]=(0,l.useState)(["YATMARIN","NETSEL","DIS_SERVIS"]),[c,m]=(0,l.useState)(""),[p,x]=(0,l.useState)("tarih"),[y,k]=(0,l.useState)(null),[j,S]=(0,l.useState)(null);(0,l.useEffect)(()=>{D()},[]);let D=async()=>{try{let e=await (0,v.Qz)();r(e)}catch(e){console.error("Failed to load services:",e)}},I=e=>{s(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])},R=e=>{d(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])},A=async(e,a)=>{"TAMAMLANDI"===a?k(e):("PARCA_BEKLIYOR"===a?(r(r=>r.map(r=>r.id===e.id?{...r,durum:a}:r)),S(e)):r(r=>r.map(r=>r.id===e.id?{...r,durum:a}:r)),await (0,v.Pg)(e.id,{durum:a}))},N=async(e,a)=>{if(y){let n={durum:"TAMAMLANDI",kapanisRaporu:e,atananPersonel:a};r(e=>e.map(e=>e.id===y.id?{...e,...n}:e)),await (0,v.Pg)(y.id,n)}},z=async(e,a)=>{if(j){let n={bekleyenParcalar:e,taseronNotlari:a};r(e=>e.map(e=>e.id===j.id?{...e,...n}:e)),await (0,v.Pg)(j.id,n)}},C=e.filter(e=>{let r=a.includes(e.durum),n=o.includes((0,t.G7)(e.adres)),l=e.tekneAdi.toLowerCase().includes(c.toLowerCase())||e.servisAciklamasi.toLowerCase().includes(c.toLowerCase());return r&&n&&l}),E=[...C].sort((e,r)=>"tarih"===p?new Date(r.tarih).getTime()-new Date(e.tarih).getTime():"konum"===p?(0,t.G7)(e.adres).localeCompare((0,t.G7)(r.adres)):"durum"===p?b.indexOf(e.durum)-b.indexOf(r.durum):0);return(0,n.jsxs)("div",{className:"animate-fade-in",children:[(0,n.jsxs)("header",{className:"page-header",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"page-title",children:"\uD83D\uDCC5 Servis Planlama"}),(0,n.jsxs)("p",{style:{color:"var(--color-text-muted)"},children:[C.length," / ",e.length," servis g\xf6steriliyor"]})]}),(0,n.jsx)(i.default,{href:"/planlama/yeni",className:"btn btn-primary",children:"➕ Yeni Servis Ekle"})]}),(0,n.jsxs)("div",{className:"card",style:{marginBottom:"var(--space-lg)"},children:[(0,n.jsxs)("div",{style:{display:"flex",gap:"var(--space-md)",marginBottom:"var(--space-md)",flexWrap:"wrap"},children:[(0,n.jsx)("input",{type:"text",placeholder:"\uD83D\uDD0D Tekne adı veya a\xe7ıklama ara...",className:"form-input",style:{flex:1,minWidth:"250px"},value:c,onChange:e=>m(e.target.value)}),(0,n.jsxs)("select",{className:"form-select",style:{width:"150px"},value:p,onChange:e=>x(e.target.value),children:[(0,n.jsx)("option",{value:"tarih",children:"Tarihe G\xf6re"}),(0,n.jsx)("option",{value:"konum",children:"Konuma G\xf6re"}),(0,n.jsx)("option",{value:"durum",children:"Duruma G\xf6re"})]})]}),(0,n.jsxs)("div",{style:{marginBottom:"var(--space-md)"},children:[(0,n.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--color-text-muted)",marginBottom:"var(--space-xs)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Durum"}),(0,n.jsx)("div",{style:{display:"flex",gap:"var(--space-xs)",flexWrap:"wrap"},children:b.map(e=>(0,n.jsxs)("button",{onClick:()=>I(e),style:{padding:"4px 10px",fontSize:"0.7rem",fontWeight:600,borderRadius:"var(--radius-full)",border:a.includes(e)?"2px solid ".concat(t.FI[e].color):"1px solid var(--color-border)",background:a.includes(e)?t.FI[e].color:"transparent",color:a.includes(e)?"white":"var(--color-text-muted)",cursor:"pointer"},children:[t.FI[e].icon," ",t.FI[e].label]},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--color-text-muted)",marginBottom:"var(--space-xs)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Konum"}),(0,n.jsx)("div",{style:{display:"flex",gap:"var(--space-xs)"},children:h.map(e=>(0,n.jsxs)("button",{onClick:()=>R(e),style:{padding:"4px 12px",fontSize:"0.75rem",fontWeight:600,borderRadius:"var(--radius-md)",border:o.includes(e)?"2px solid ".concat(t.YH[e].color):"1px solid var(--color-border)",background:o.includes(e)?t.YH[e].color:"transparent",color:o.includes(e)?"white":"var(--color-text-muted)",cursor:"pointer"},children:[t.YH[e].icon," ",t.YH[e].label]},e))})]})]}),(0,n.jsx)("div",{className:"table-container",children:(0,n.jsxs)("table",{className:"table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Tarih"}),(0,n.jsx)("th",{children:"Tekne"}),(0,n.jsx)("th",{children:"Konum"}),(0,n.jsx)("th",{children:"Servis"}),(0,n.jsx)("th",{children:"Durum"}),(0,n.jsx)("th",{children:"Sorumlu / Ofis"}),(0,n.jsx)("th",{children:"İşlemler"})]})}),(0,n.jsx)("tbody",{children:E.map(e=>(0,n.jsx)(g,{service:e,onDurumChange:r=>A(e,r),onPartsClick:()=>S(e)},e.id))})]})}),(0,n.jsx)(u,{service:y,isOpen:!!y,onClose:()=>k(null),onComplete:N}),(0,n.jsx)(f,{serviceId:(null==j?void 0:j.id)||"",tekneAdi:(null==j?void 0:j.tekneAdi)||"",initialParcalar:null==j?void 0:j.bekleyenParcalar,initialNot:null==j?void 0:j.taseronNotlari,isOpen:!!j,onClose:()=>S(null),onSave:z})]})}function g(e){var r;let{service:a,onDurumChange:o,onPartsClick:d}=e,[c,u]=(0,l.useState)(!1),m=(0,t.G7)(a.adres);return(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{children:[(0,n.jsx)("div",{style:{fontWeight:600},children:a.tarih}),a.saat&&(0,n.jsx)("div",{style:{fontSize:"0.8rem",color:"var(--color-primary-light)"},children:a.saat})]}),(0,n.jsx)("td",{children:(0,n.jsx)(i.default,{href:"/planlama/".concat(a.id),style:{fontWeight:500,color:"var(--color-text)",textDecoration:"none"},children:a.tekneAdi})}),(0,n.jsxs)("td",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,n.jsx)("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:t.YH[m].color}}),(0,n.jsx)("span",{children:a.adres})]}),(0,n.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:a.yer})]}),(0,n.jsx)("td",{style:{maxWidth:"250px"},children:(0,n.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.servisAciklamasi})}),(0,n.jsxs)("td",{children:[(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)("button",{onClick:()=>u(!c),style:{background:"none",border:"none",cursor:"pointer",padding:0},children:(0,n.jsx)(s.Z,{durum:a.durum})}),c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{onClick:()=>u(!1),style:{position:"fixed",inset:0,zIndex:50}}),(0,n.jsx)("div",{style:{position:"absolute",top:"100%",left:0,background:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",boxShadow:"var(--shadow-lg)",zIndex:51,minWidth:"180px",padding:"var(--space-xs)"},children:Object.entries(t.FI).map(e=>{let[r,l]=e;return(0,n.jsxs)("button",{onClick:()=>{o(r),u(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"var(--space-sm)",border:"none",background:a.durum===r?l.color:"transparent",color:a.durum===r?"white":"var(--color-text)",cursor:"pointer",borderRadius:"var(--radius-sm)",fontSize:"0.8rem"},children:[l.icon," ",l.label]},r)})})]})]}),"PARCA_BEKLIYOR"===a.durum&&a.bekleyenParcalar&&a.bekleyenParcalar.length>0&&(0,n.jsxs)("button",{onClick:d,style:{marginTop:"4px",fontSize:"0.65rem",color:"var(--color-warning)",background:"none",border:"none",cursor:"pointer",textDecoration:"underline"},children:[a.bekleyenParcalar.length," par\xe7a bekliyor"]})]}),(0,n.jsx)("td",{children:(0,n.jsxs)("div",{style:{fontSize:"0.8rem"},children:[(0,n.jsxs)("div",{style:{fontWeight:500},children:["\uD83D\uDC64 ",(null===(r=a.atananPersonel.find(e=>"sorumlu"===e.rol))||void 0===r?void 0:r.personnelAd)||"-"]}),a.ofisYetkilisi&&(0,n.jsxs)("div",{style:{color:"var(--color-text-muted)",fontSize:"0.75rem"},children:["\uD83C\uDFE2 ",a.ofisYetkilisi]})]})}),(0,n.jsx)("td",{children:(0,n.jsx)(i.default,{href:"/planlama/".concat(a.id,"/duzenle"),className:"btn btn-secondary",style:{fontSize:"0.7rem",padding:"4px 8px"},children:"✏️ D\xfczenle"})})]})}},1313:function(e,r,a){"use strict";a.d(r,{Z:function(){return i}});var n=a(7437),l=a(4939);function i(e){let{durum:r,showIcon:a=!0}=e,i=l.FI[r];return(0,n.jsxs)("span",{className:"badge",style:{backgroundColor:i.bgColor,color:i.color,display:"inline-flex",alignItems:"center",gap:"4px"},children:[a&&(0,n.jsx)("span",{children:i.icon}),(0,n.jsx)("span",{children:i.label})]})}},9116:function(e,r,a){"use strict";async function n(e){let r=await fetch(e);if(!r.ok)throw Error("Failed to fetch ".concat(e,": ").concat(r.statusText));return r.json()}async function l(){return n("/api/services")}async function i(e){try{return await n("/api/services/".concat(e))}catch(e){return null}}async function s(e,r){return(await fetch("/api/services/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok}async function t(){return n("/api/personnel")}async function o(e){try{return await n("/api/personnel/".concat(e))}catch(e){return null}}a.d(r,{$c:function(){return t},Pg:function(){return s},Qz:function(){return l},hi:function(){return o},nh:function(){return i}})},9596:function(e,r,a){"use strict";a.d(r,{NJ:function(){return l},xm:function(){return i}});var n=a(4939);function l(e,r){let a=n.sY[r],l=0;return a.forEach(r=>{e[r]&&l++}),e.aciklama&&e.aciklama.length>20&&(l+=.5),l/(a.length+.5)}function i(e,r,a,l){let i;let s=n.Ib[r].carpan,t=(i="sorumlu"===a?40+60*e:80)*s;return l&&(t+=15),{hamPuan:Math.round(i),zorlukCarpani:s,finalPuan:Math.round(t)}}},4939:function(e,r,a){"use strict";a.d(r,{DV:function(){return x},FI:function(){return n},G7:function(){return i},GS:function(){return m},Ib:function(){return s},Rf:function(){return t},YH:function(){return l},YU:function(){return p},pb:function(){return d},qY:function(){return c},sY:function(){return o},un:function(){return u}});let n={RANDEVU_VERILDI:{label:"Randevu Verildi",color:"#0891b2",bgColor:"#ecfeff",icon:"\uD83D\uDCC5"},DEVAM_EDIYOR:{label:"Devam Ediyor",color:"#16a34a",bgColor:"#f0fdf4",icon:"\uD83D\uDD04"},PARCA_BEKLIYOR:{label:"Par\xe7a Bekliyor",color:"#ea580c",bgColor:"#fff7ed",icon:"\uD83D\uDCE6"},MUSTERI_ONAY_BEKLIYOR:{label:"Onay Bekliyor",color:"#ca8a04",bgColor:"#fefce8",icon:"⏳"},RAPOR_BEKLIYOR:{label:"Rapor Bekliyor",color:"#2563eb",bgColor:"#eff6ff",icon:"\uD83D\uDCDD"},KESIF_KONTROL:{label:"Keşif-Kontrol",color:"#9333ea",bgColor:"#faf5ff",icon:"\uD83D\uDD0D"},TAMAMLANDI:{label:"Tamamlandı",color:"#57534e",bgColor:"#f5f5f4",icon:"✅"}},l={YATMARIN:{label:"Yatmarin (Merkez)",color:"#0f766e",icon:"\uD83C\uDFE0"},NETSEL:{label:"Netsel",color:"#1d4ed8",icon:"⚓"},DIS_SERVIS:{label:"Dış Servis",color:"#7c3aed",icon:"\uD83D\uDE97"}};function i(e){let r=e.toUpperCase();return r.includes("YATMARİN")||r.includes("YATMARIN")?"YATMARIN":r.includes("NETSEL")?"NETSEL":"DIS_SERVIS"}let s={PAKET:{label:"Paket İş (Rutin)",carpan:1},ARIZA:{label:"Arıza / Keşif",carpan:1.2},PROJE:{label:"Proje / Refit",carpan:1.5}},t={usta:{label:"Usta",icon:"\uD83D\uDC68‍\uD83D\uDD27"},cirak:{label:"\xc7ırak",icon:"\uD83D\uDC77"},yonetici:{label:"Y\xf6netici",icon:"\uD83D\uDC54"},ofis:{label:"Ofis",icon:"\uD83C\uDFE2"}},o={PAKET:["uniteBilgileri","fotograf","tekneKonum","sarfMalzeme","stokMalzeme"],ARIZA:["uniteBilgileri","fotograf","tekneKonum","sarfMalzeme","adamSaat","stokMalzeme"],PROJE:["uniteBilgileri","fotograf","tekneKonum","sarfMalzeme","adamSaat","taseronBilgisi","stokMalzeme"]},d={EVET:100,KISMEN:60,HAYIR:0,ATLA:null},c=[{key:"uniformaVeIsg",label:"\xdcniforma ve İSG Uyumu",aciklama:"Personel iş g\xfcvenliği ekipmanlarını (KKD) kullandı mı? \xdcniforma temiz ve d\xfczg\xfcn m\xfcyd\xfc?"},{key:"musteriIletisimi",label:"M\xfcşteri İletişim Kalitesi",aciklama:"M\xfcşterilerle profesyonel ve saygılı iletişim kurdu mu? Şikayet aldı mı?"},{key:"planlamaKoordinasyon",label:"Planlama ve Koordinasyon",aciklama:"İş planına uydu mu? Değişiklikleri zamanında bildirdi mi?"},{key:"teknikTespit",label:"Teknik Tespit Yeteneği",aciklama:"Arızaları ve ek iş ihtiya\xe7larını doğru tespit edebildi mi?"},{key:"raporDokumantasyon",label:"Rapor ve Dok\xfcmantasyon",aciklama:"İş raporlarını eksiksiz ve zamanında teslim etti mi?"},{key:"genelLiderlik",label:"Genel Liderlik",aciklama:"Ekibini y\xf6netti mi? \xc7ıraklara rehberlik etti mi? Sorumluluk aldı mı?"}],u=[{key:"uniformaVeIsg",label:"\xdcniforma ve İSG Uyumu",aciklama:"Personel iş g\xfcvenliği ekipmanlarını (KKD) kullandı mı? \xdcniforma temiz ve d\xfczg\xfcn m\xfcyd\xfc?"},{key:"ekipIciDavranis",label:"Ekip İ\xe7i Davranış",aciklama:"Ekip arkadaşlarıyla uyumlu \xe7alıştı mı? \xc7atışma veya tutum problemi var mıydı?"},{key:"destekKalitesi",label:"Ustalara Destek Kalitesi",aciklama:"Ustalara verilen g\xf6revlerde yardımcı oldu mu? Talimatlara uydu mu?"},{key:"ogrenmeGelisim",label:"\xd6ğrenme İsteği ve Gelişim",aciklama:"Bu ay yeni bir şey \xf6ğrendi mi? Soru sordu mu? İlerleme kaydetti mi?"}],m={1:{label:"\xc7ok Yetersiz",color:"#ef4444"},2:{label:"Geliştirilmeli",color:"#f97316"},3:{label:"Standart",color:"#eab308"},4:{label:"İyi",color:"#22c55e"},5:{label:"M\xfckemmel",color:"#10b981"}},p=["Furkan \xc7akır","İsmail \xc7oban","Senem Kaptan","Diğer"],x=[{id:"1",ad:"Ali Can Yaylalı",rol:"teknisyen",unvan:"cirak",aktif:!0},{id:"2",ad:"Alican Yaylalı",rol:"teknisyen",unvan:"usta",aktif:!0},{id:"3",ad:"Batuhan \xc7oban",rol:"teknisyen",unvan:"cirak",aktif:!0},{id:"4",ad:"C\xfcneyt Yaylalı",rol:"teknisyen",unvan:"usta",aktif:!0},{id:"5",ad:"Emre Kaya",rol:"teknisyen",unvan:"cirak",aktif:!0},{id:"6",ad:"Erhan Turhan",rol:"teknisyen",unvan:"usta",aktif:!0},{id:"7",ad:"Halil İbrahim Duru",rol:"teknisyen",unvan:"cirak",aktif:!0},{id:"8",ad:"İbrahim Yayalık",rol:"teknisyen",unvan:"usta",aktif:!0},{id:"9",ad:"İbrahim Yaylalı",rol:"teknisyen",unvan:"cirak",aktif:!0},{id:"10",ad:"Mehmet Bacak",rol:"teknisyen",unvan:"cirak",aktif:!1},{id:"11",ad:"Mehmet G\xfcven",rol:"teknisyen",unvan:"usta",aktif:!0},{id:"12",ad:"Melih \xc7oban",rol:"teknisyen",unvan:"cirak",aktif:!0},{id:"13",ad:"Sercan Sarız",rol:"teknisyen",unvan:"usta",aktif:!0},{id:"14",ad:"Volkan \xd6zkan",rol:"teknisyen",unvan:"cirak",aktif:!0},{id:"15",ad:"Yusuf Kara",rol:"teknisyen",unvan:"cirak",aktif:!0},{id:"16",ad:"Ahmet Demir",rol:"teknisyen",unvan:"usta",aktif:!0},{id:"17",ad:"Mustafa Yıldız",rol:"teknisyen",unvan:"cirak",aktif:!0}]}},function(e){e.O(0,[972,861,971,117,744],function(){return e(e.s=5579)}),_N_E=e.O()}]);