(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[599],{6020:function(e,s,i){Promise.resolve().then(i.bind(i,7736))},7736:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return x}});var r=i(7437),n=i(2265),t=i(7648),l=i(7542),a=i(4689),o=i(6942);let c={Plus:()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,r.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Search:()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Users:()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,r.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,r.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,r.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Refresh:()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,r.jsx)("polyline",{points:"1 20 1 14 7 14"}),(0,r.jsx)("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),Eye:()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),Edit:()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,r.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Star:()=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),Briefcase:()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),Mail:()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),(0,r.jsx)("polyline",{points:"22,6 12,13 2,6"})]}),Phone:()=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})},d={ADMIN:"Y\xf6netici",YETKILI:"Yetkili",TEKNISYEN:"Teknisyen",MUSTERI:"M\xfcşteri"},h={usta:"Usta",cirak:"\xc7ırak",yonetici:"Y\xf6netici",ofis:"Ofis Personeli"};function x(){let{isAuthenticated:e,isLoading:s}=(0,o.a)(),[i,x]=(0,n.useState)([]),[j,u]=(0,n.useState)(!0),[m,g]=(0,n.useState)(""),[p,v]=(0,n.useState)("all"),[w,f]=(0,n.useState)(0),[k,N]=(0,n.useState)(10),[y,L]=(0,n.useState)(0);(0,n.useEffect)(()=>{let e=async()=>{try{let e=new URLSearchParams({page:(w+1).toString(),limit:k.toString(),...m&&{search:m},..."all"!==p&&{rol:p}}),s=await fetch("/api/team?".concat(e));if(s.ok){let e=await s.json();x(e.data||[]),L(e.total||0)}}catch(e){console.error("Personel getirilemedi:",e)}finally{u(!1)}};s||e()},[w,k,m,p,s]);let b=i.filter(e=>{let s=e.ad.toLowerCase().includes(m.toLowerCase())||e.email.toLowerCase().includes(m.toLowerCase()),i="all"===p||e.rol===p;return s&&i}),C=e=>{let s={ADMIN:{bg:"rgba(245, 158, 11, 0.2)",text:"#f59e0b"},YETKILI:{bg:"rgba(59, 130, 246, 0.2)",text:"#3b82f6"},TEKNISYEN:{bg:"rgba(16, 185, 129, 0.2)",text:"#10b981"},MUSTERI:{bg:"rgba(139, 92, 246, 0.2)",text:"#8b5cf6"}}[e]||{bg:"rgba(100, 116, 139, 0.2)",text:"#64748b"};return(0,r.jsx)(l.Ct,{style:{backgroundColor:s.bg,color:s.text},variant:"outline",children:d[e]||e})};return s?(0,r.jsx)(a.Z,{children:(0,r.jsx)(l.Zb,{children:(0,r.jsx)(l.aY,{className:"pt-6",children:(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)(l.Od,{className:"h-12 w-full"},s))})})})}):(0,r.jsxs)(a.Z,{title:"Personel",subtitle:"Ekip \xfcyelerini ve performanslarını y\xf6netin",showSearch:!1,actions:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(l.zx,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:[(0,r.jsx)(c.Refresh,{}),"Yenile"]}),(0,r.jsx)(t.default,{href:"/team/new",children:(0,r.jsxs)(l.zx,{children:[(0,r.jsx)(c.Plus,{}),"Yeni Personel"]})})]}),children:[(0,r.jsx)(l.Zb,{className:"mb-6",children:(0,r.jsx)(l.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(c.Search,{}),(0,r.jsx)(l.II,{placeholder:"İsim veya e-posta ara...",value:m,onChange:e=>g(e.target.value),className:"pl-10"})]}),(0,r.jsxs)(l.Ph,{value:p,onValueChange:v,children:[(0,r.jsx)(l.i4,{className:"w-full md:w-48",children:(0,r.jsx)(l.ki,{placeholder:"Rol filtrele"})}),(0,r.jsxs)(l.Bw,{children:[(0,r.jsx)(l.Ql,{value:"all",children:"T\xfcm Roller"}),(0,r.jsx)(l.Ql,{value:"ADMIN",children:"Y\xf6netici"}),(0,r.jsx)(l.Ql,{value:"YETKILI",children:"Yetkili"}),(0,r.jsx)(l.Ql,{value:"TEKNISYEN",children:"Teknisyen"})]})]})]})})}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{children:"Ekip \xdcyeleri"}),(0,r.jsxs)(l.SZ,{children:[y," personel kayıtlı"]})]}),(0,r.jsx)(l.aY,{children:j?(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)(l.Od,{className:"h-12 w-full"},s))}):0===b.length?(0,r.jsx)(l.ub,{icon:(0,r.jsx)(c.Users,{}),title:"Personel Bulunamadı",description:m||"all"!==p?"Arama kriterlerinizi değiştirmeyi deneyin.":"Hen\xfcz bir personel kaydedilmemiş.",action:(0,r.jsx)(t.default,{href:"/team/new",children:(0,r.jsxs)(l.zx,{children:[(0,r.jsx)(c.Plus,{}),"İlk Personeli Ekle"]})})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.iA,{children:[(0,r.jsx)(l.xD,{children:(0,r.jsxs)(l.SC,{children:[(0,r.jsx)(l.ss,{children:"Personel"}),(0,r.jsx)(l.ss,{children:"Unvan"}),(0,r.jsx)(l.ss,{children:"Rol"}),(0,r.jsx)(l.ss,{children:"İletişim"}),(0,r.jsx)(l.ss,{children:"Servis"}),(0,r.jsx)(l.ss,{children:"Puan"}),(0,r.jsx)(l.ss,{className:"text-right",children:"İşlemler"})]})}),(0,r.jsx)(l.RM,{children:b.map(e=>(0,r.jsxs)(l.SC,{children:[(0,r.jsx)(l.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(l.qE,{className:"h-10 w-10",children:(0,r.jsx)(l.Q5,{className:"bg-primary/10 text-primary font-semibold",children:e.ad.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.ad}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:e.aktif?(0,r.jsx)("span",{className:"text-green-500",children:"● Aktif"}):(0,r.jsx)("span",{className:"text-gray-500",children:"● Pasif"})})]})]})}),(0,r.jsx)(l.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(c.Briefcase,{}),(0,r.jsx)("span",{children:h[e.unvan]||e.unvan})]})}),(0,r.jsx)(l.pj,{children:C(e.rol)}),(0,r.jsx)(l.pj,{children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(c.Mail,{}),(0,r.jsx)("span",{className:"text-muted-foreground",children:e.email})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(c.Phone,{}),(0,r.jsx)("span",{className:"text-muted-foreground",children:e.telefon})]})]})}),(0,r.jsx)(l.pj,{children:(0,r.jsxs)(l.Ct,{variant:"secondary",children:[e.toplamServisSayisi||0," servis"]})}),(0,r.jsx)(l.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(c.Star,{}),(0,r.jsx)("span",{className:"font-semibold",children:e.basariPuani||0})]})}),(0,r.jsx)(l.pj,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(t.default,{href:"/team/".concat(e.id),children:(0,r.jsx)(l.zx,{variant:"ghost",size:"icon",children:(0,r.jsx)(c.Eye,{})})}),(0,r.jsx)(t.default,{href:"/team/".concat(e.id,"/edit"),children:(0,r.jsx)(l.zx,{variant:"ghost",size:"icon",children:(0,r.jsx)(c.Edit,{})})})]})})]},e.id))})]}),(0,r.jsx)(l.vI,{total:y,page:w,onPageChange:f,rowsPerPage:k,onRowsPerPageChange:e=>{N(e),f(0)}})]})})]})]})}}},function(e){e.O(0,[972,750,306,788,171,746,971,117,744],function(){return e(e.s=6020)}),_N_E=e.O()}]);